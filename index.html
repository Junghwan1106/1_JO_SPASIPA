<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>

    <title>스파싯파 피디아</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">

    <script>
        $(document).ready(function () {
            listing();
        });

        function listing() {
            fetch('/tube').then((res) => res.json()).then((data) => {
                let rows = data['result']

                $('#tube-box').empty()
                rows.forEach((a) => {
                    let title = a['title']
                    let image = a['image']
                    let desc = a['desc']
                    let comment = a['comment']
                    let star = a['star']
                    let star_repeat = '⭐'.repeat(star)

                    let temp_html = `
                    <div class="col">
                        <div class="card h-100">
                            <img src=${image}
                                class="card-img-top">
                            <div class="card-body">
                                <h5 class="card-title">${title}</h5>
                                <p class="card-text">${desc}</p>
                                <p>${star_repeat}</p>
                                <p class="mycomment">${comment}</p>
                            </div>
                        </div>
                    </div>
                    `
                    $('#tube-box').append(temp_html)
                })
            })
        }

        function posting() {

            let url = $('#url').val()
            let comment = $('#comment').val()
            let star = $('#star').val()

            let formData = new FormData();
            formData.append("url_give", url);
            formData.append("comment_give", comment);
            formData.append("star_give", star);

            fetch('/tube', {
                method: "POST",
                body: formData
            }).then((res) => res.json()).then((data) => {
                alert(data['msg'])
                window.location.reload()
            })
        }

        function open_box() {
            $('#post-box').show()
        }

        function close_box() {
            $('#post-box').hide()
        }
    </script>
</head>

<body>
    <!-- 최상단 상태바 -->
    <div class="status-bar">
        <div class="status-bar__column">
            <img class="logo-img" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Netflix_2015_logo.svg/1200px-Netflix_2015_logo.svg.png" alt="logo">
        </div>
        <div class="status-bar__column">

        </div>
        <div class="status-bar__column">
            <a href=""><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
              </svg>
            </a>
        </div>
    </div>

    <!-- 타이틀 창 -->
    <div class="mytitle">
        
        <div class="mytitle-container">
            <div>

            </div>
            <div class="mytitle-container-h">
                <h1 class="mytitle-h1">최애의 픽</h1>
                <h2 class="mytitle-h2">당신의 유튜브 픽은?</h2>
            </div>
            <div>
                <button class="pick-btn" onclick="open_box()">Pick</button>
            </div>
           
        </div>
        
        
    </div>

    <!-- 기록하기 창 -->
    <div class="mypost" id="post-box">
        <div class="form-floating mb-3">
            <input id="url" type="email" class="form-control" placeholder="name@example.com">
            <label>유튜브URL</label>
        </div>
        <div class="input-group mb-3">
            <label class="input-group-text" for="inputGroupSelect01">별점</label>
            <select class="form-select" id="star">
                <option selected>-- 선택하기 --</option>
                <option value="1">⭐</option>
                <option value="2">⭐⭐</option>
                <option value="3">⭐⭐⭐</option>
                <option value="4">⭐⭐⭐⭐</option>
                <option value="5">⭐⭐⭐⭐⭐</option>
            </select>
        </div>
        <div class="form-floating">
            <textarea id="comment" class="form-control" placeholder="Leave a comment here"></textarea>
            <label for="floatingTextarea2">코멘트</label>
        </div>
        <div class="mybtns">
            <button onclick="posting()" type="button" class="btn btn-dark">기록하기</button>
            <button onclick="close_box()" type="button" class="btn btn-dark">닫기</button>
        </div>
    </div>

    <!-- 영상 목록 -->
    <div>
        <div class="tubes">
            <div class="row row-cols-1 row-cols-md-5 g-4" id="tube-box">
                <div class="col">
                    <div class="card h-100">
                        <img src="https://i.ytimg.com/vi/ktZ3XR887wk/hq720.jpg?sqp=-…AFwAcABBg==&rs=AOn4CLBCCLDe2KYMfOt7yOV06cdTiGqVbA"
                            class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">영화 제목이 들어갑니다</h5>
                            <p class="card-text">여기에 영화에 대한 설명이 들어갑니다.</p>
                            <p>⭐⭐⭐</p>
                            <p class="mycomment">나의 한줄 평을 씁니다</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <img src="https://i.ytimg.com/vi/SMI8DuSyYhw/hq720.jpg?sqp=-…AFwAcABBg==&rs=AOn4CLBqdz9JgBJhZSniolQfBnCRD2cVFA"
                            class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">영화 제목이 들어갑니다</h5>
                            <p class="card-text">여기에 영화에 대한 설명이 들어갑니다.</p>
                            <p>⭐⭐⭐</p>
                            <p class="mycomment">나의 한줄 평을 씁니다</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <img src="https://i.ytimg.com/vi/ktZ3XR887wk/hq720.jpg?sqp=-…AFwAcABBg==&rs=AOn4CLBCCLDe2KYMfOt7yOV06cdTiGqVbA"
                            class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">영화 제목이 들어갑니다</h5>
                            <p class="card-text">여기에 영화에 대한 설명이 들어갑니다.</p>
                            <p>⭐⭐⭐</p>
                            <p class="mycomment">나의 한줄 평을 씁니다</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <img src="https://i.ytimg.com/vi/SMI8DuSyYhw/hq720.jpg?sqp=-…AFwAcABBg==&rs=AOn4CLBqdz9JgBJhZSniolQfBnCRD2cVFA"
                            class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">영화 제목이 들어갑니다</h5>
                            <p class="card-text">여기에 영화에 대한 설명이 들어갑니다.</p>
                            <p>⭐⭐⭐</p>
                            <p class="mycomment">나의 한줄 평을 씁니다</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <img src="https://i.ytimg.com/vi/SMI8DuSyYhw/hq720.jpg?sqp=-…AFwAcABBg==&rs=AOn4CLBqdz9JgBJhZSniolQfBnCRD2cVFA"
                            class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">영화 제목이 들어갑니다</h5>
                            <p class="card-text">여기에 영화에 대한 설명이 들어갑니다.</p>
                            <p>⭐⭐⭐</p>
                            <p class="mycomment">나의 한줄 평을 씁니다</p>
                        </div>
                    </div>
                </div>
               
                
            </div>
        </div>


        <!-- 탑5 목록 -->
        <div class="top">
            <div class="top-title">
                TOP N
            </div>
            <div class="top-tubes">
                <div class="top-tube">
                    <img src="https://www.netflix.com/tudum/top10/images/big_numbers/1.png" alt="number">
                    <img src="https://i.ytimg.com/vi/SMI8DuSyYhw/hq720.jpg?sqp=-…AFwAcABBg==&rs=AOn4CLBqdz9JgBJhZSniolQfBnCRD2cVFA" alt="tube image">
                </div>
                <div class="top-tube">
                    <img src="https://www.netflix.com/tudum/top10/images/big_numbers/2.png" alt="number">
                    <img src="https://i.ytimg.com/vi/SMI8DuSyYhw/hq720.jpg?sqp=-…AFwAcABBg==&rs=AOn4CLBqdz9JgBJhZSniolQfBnCRD2cVFA" alt="tube image">
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>